<!DOCTYPE html>
<html lang="zh"><head>
  <meta charset="utf-8">
  <title>如何升级CentOS内核</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Xiak&#39;s Blog">
  <meta name="author" content="Xiak">
  <meta name="generator" content="Hugo 0.81.0" />
  
  
  <meta property="og:image" content="https://xiak.com/images/blog/light.jpg" />
  
  <meta property="og:title" content="如何升级CentOS内核" />
<meta property="og:description" content="如何升级 CentOS7 内核 CentOS 7 内核包 kernel: This package contains the kernel for single-core, multi-core, and multi-processor systems kernel-devel : This contains kernel headers" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xiak.com/devops/how-to-up-kernel/" /><meta property="article:section" content="devops" />
<meta property="article:published_time" content="2019-03-05T21:06:00&#43;08:00" />
<meta property="article:modified_time" content="2019-03-05T21:06:00&#43;08:00" />


  

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://xiak.com/plugins/bootstrap/bootstrap.min.css" media='screen'>
  
  <link rel="stylesheet" href="https://xiak.com/plugins/Ionicons/css/ionicons.min.css" >
  
  <link rel="stylesheet" href="https://xiak.com/plugins/magnific-popup/magnific-popup.min.css" >
  
  <link rel="stylesheet" href="https://xiak.com/plugins/slick/slick.css" >
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://xiak.com/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://xiak.com/images/favicon.png" type="image/x-icon">
  <link rel="icon" href="https://xiak.com/images/favicon.png" type="image/x-icon">

</head><body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->

<header class="navigation">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        
        <nav class="navbar">
          
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navigation">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
              <img src="https://xiak.com/images/logo.png" alt="XIAK | Community" width="100px" class="img-responsive">
            </a>
          </div>
          
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="nav navbar-nav navbar-right">
              
              
              <li><a href="/">主页</a></li>
              
              
              
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                  aria-expanded="false">博客 <span class="ion-ios-arrow-down"></span></a>
                <ul class="dropdown-menu">
                  
                  <li><a href="/devops">DevOps</a></li>
                  
                  <li><a href="/algorithm">算法</a></li>
                  
                </ul>
              </li>
              
              
              
              <li><a href="/contact">联系我</a></li>
              
              

              
            </ul>
          </div>
        </nav>
      </div>
    </div>
  </div>
</header>

<section class="page-title bg-2" style="background-image: url('https://xiak.com/images/featue-bg.jpg');">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="block">
          <h1>如何升级CentOS内核</h1>
          <p></p>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="page-wrapper">
	<div class="container">
		<div class="row">
			<div class="col-md-8">
				<div class="post post-single">
					<h2 class="post-title">如何升级CentOS内核</h2>
					<div class="post-meta">
						<ul>
              <li><i class="ion-calendar"></i> March 5, 2019</li>
              <li><i class="ion-android-people"></i>
                提交人
                
                <a class="text-primary" href="/author/xiak">Xiak</a>
                
              </li>
              <li><i class="ion-pricetags"></i> 
                
                <a href="/tags/devops">Devops</a>
								
                , <a href="/tags/linux">Linux</a>
								
              </li>
            </ul>
					</div>
					<div class="post-thumb">
						<img class="img-responsive" src="/images/blog/light.jpg" alt="如何升级CentOS内核">
					</div>
					<div class="post-content post-excerpt">
						<h1 id="如何升级-centos7-内核">如何升级 CentOS7 内核</h1>
<h2 id="centos-7-内核包">CentOS 7 内核包</h2>
<ul>
<li>kernel: This package contains the kernel for single-core, multi-core, and multi-processor systems</li>
<li>kernel-devel : This contains kernel headers and makefiles used to build kernel modules against installed Kernel version.</li>
<li>kernel-headers: This package includes the C header files that powers interfacing between the Linux kernel and user-space libraries and programs.</li>
<li>kernel-tools: Contains tools for manipulating the Linux kernel and supporting documentation.</li>
<li>perf: This package contains the perf tool, which enables performance monitoring of the Linux kernel.</li>
<li>linux-firmware: This contains the firmware files required by various devices to operate</li>
</ul>
<h2 id="安装">安装</h2>
<p>Import GPG key used for signing packages:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
</code></pre></div><blockquote>
<p>NOTE: 以下链接版本可能不是最新, 请按照 <a href="http://elrepo.org/tiki/HomePage">elrepo guide</a> 更新下面的链接</p>
</blockquote>
<p>Add ELRepo repository to your CentOS 7 by running the commands below:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">yum install https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm
</code></pre></div><p>Add ELRepo repository to your CentOS 8 by running the commands below:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">yum install https://www.elrepo.org/elrepo-release-8.el8.elrepo.noarch.rpm
</code></pre></div><p>This will add elrepo-kernel channel which provides both the long-term(kernel-lt) support kernels and latest stable mainline kernels(kernel-ml) for RHEL and CentOS. This channel is not enabled by default and you need to explicitly enable it before installing Kernel 5.x on CentOS 7.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ yum --disablerepo<span class="o">=</span><span class="s2">&#34;*&#34;</span> --enablerepo<span class="o">=</span><span class="s2">&#34;elrepo-kernel&#34;</span> list available <span class="p">|</span> grep kernel-ml
 kernel-ml.x86_64                        5.0.0-1.el7.elrepo         elrepo-kernel
 kernel-ml-devel.x86_64                  5.0.0-1.el7.elrepo         elrepo-kernel
 kernel-ml-doc.noarch                    5.0.0-1.el7.elrepo         elrepo-kernel
 kernel-ml-headers.x86_64                5.0.0-1.el7.elrepo         elrepo-kernel
 kernel-ml-tools.x86_64                  5.0.0-1.el7.elrepo         elrepo-kernel
 kernel-ml-tools-libs.x86_64             5.0.0-1.el7.elrepo         elrepo-kernel
 kernel-ml-tools-libs-devel.x86_64       5.0.0-1.el7.elrepo         elrepo-kernel
</code></pre></div><p>ow that we have confirmed availability of Linux Kernel 5.x, we can proceed to install it.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">yum --enablerepo<span class="o">=</span>elrepo-kernel install kernel-ml
</code></pre></div><p>Setting Kernel 5.1.12 on CentOS 7 as default</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ awk -F<span class="se">\&#39;</span> <span class="s1">&#39;$1==&#34;menuentry &#34; {print i++ &#34; : &#34; $2}&#39;</span> /etc/grub2.cfg

0:CentOSLinux<span class="o">(</span>3.10.0-957.27.2.el7.x86_64<span class="o">)</span>7<span class="o">(</span>Core<span class="o">)</span>
1:CentOSLinux<span class="o">(</span>4.4.189-1.el7.elrepo.x86_64<span class="o">)</span>7<span class="o">(</span>Core<span class="o">)</span>
2:CentOSLinux<span class="o">(</span>5.1.12-1.el7.elrepo.x86_64<span class="o">)</span>7<span class="o">(</span>Core<span class="o">)</span>   &lt;------ This num is <span class="m">2</span>
3:CentOSLinux<span class="o">(</span>4.4.179-1.el7.elrepo.x86_64<span class="o">)</span>7<span class="o">(</span>Core<span class="o">)</span>
4:CentOSLinux<span class="o">(</span>3.10.0-957.12.1.el7.x86_64<span class="o">)</span>7<span class="o">(</span>Core<span class="o">)</span>
5:CentOSLinux<span class="o">(</span>3.10.0-514.el7.x86_64<span class="o">)</span>7<span class="o">(</span>Core<span class="o">)</span>
6:CentOSLinux<span class="o">(</span>0-rescue-d05df9772421403f9808fd87bb58abb6<span class="o">)</span>7<span class="o">(</span>Core<span class="o">)</span>

$ grub2-set-default <span class="m">2</span>
</code></pre></div><p>Reboot</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ reboot
$ uname -r
5.0.0-1.el7.elrepo.x86_64
</code></pre></div><p>Also install kernel-ml-devel,kernel-ml-headers,kernel-ml-tools,perf</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">yum -y --enablerepo<span class="o">=</span>elrepo-kernel install kernel-ml-<span class="o">{</span>devel,headers,perf<span class="o">}</span>
</code></pre></div><h2 id="删除-kernel">删除 kernel</h2>
<h3 id="查看已经安装的内核">查看已经安装的内核</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">rpm -qa <span class="p">|</span> grep kernel
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo yum remove kernel-3.10.0-957.el7.x86_64
</code></pre></div>
					</div>
					<div class="post-comments">
						
					</div>
				</div>
			</div>
      <div class="col-md-4">
        <aside class="sidebar"><div class="widget widget-latest-post">
    <h4 class="widget-title">最近提交</h4>
    
    <div class="media">
      <a class="pull-left" href="https://xiak.com/algorithm/daily-temperatures/">
        <img class="media-object" src="/images/blog/work.jpg" alt="739. 每日温度">
      </a>
      <div class="media-body">
        <h4 class="media-heading"><a href="https://xiak.com/algorithm/daily-temperatures/">739. 每日温度</a></h4>
        <p>Leetcode 链接 739. 每日温度 题干 请根据每日 气温 列表，重新生成一个列表。对</p>
      </div>
    </div>
    
    <div class="media">
      <a class="pull-left" href="https://xiak.com/algorithm/add-two-numbers-1/">
        <img class="media-object" src="/images/blog/work.jpg" alt="两数相加: 常规算法和原地算法">
      </a>
      <div class="media-body">
        <h4 class="media-heading"><a href="https://xiak.com/algorithm/add-two-numbers-1/">两数相加: 常规算法和原地算法</a></h4>
        <p>Leetcode 链接 2. 两数相加 题干 给你两个 非空 的链表，表示两个非负的整数。</p>
      </div>
    </div>
    
    <div class="media">
      <a class="pull-left" href="https://xiak.com/algorithm/calculator/">
        <img class="media-object" src="/images/blog/work.jpg" alt="面试题 16.26. 计算器">
      </a>
      <div class="media-body">
        <h4 class="media-heading"><a href="https://xiak.com/algorithm/calculator/">面试题 16.26. 计算器</a></h4>
        <p>Leetcode 链接 面试题 16.26. 计算器 题干 给定一个包含正整数、加(+)、减(-</p>
      </div>
    </div>
    
    <div class="media">
      <a class="pull-left" href="https://xiak.com/algorithm/list/">
        <img class="media-object" src="/images/blog/cafe.jpg" alt="链表设计">
      </a>
      <div class="media-body">
        <h4 class="media-heading"><a href="https://xiak.com/algorithm/list/">链表设计</a></h4>
        <p>Leetcode 链接 707. 设计链表 题干 设计链表的实现。您可以选择使用单链表或双</p>
      </div>
    </div>
    
  </div><div class="widget widget-category">
    <h4 class="widget-title">分类</h4>
    <ul class="widget-category-list">
      <li><a href="/categories/algorithm">Algorithm</a></li>
      <li><a href="/categories/devops">Devops</a></li>
    </ul>
  </div><div class="widget widget-tag">
    <h4 class="widget-title">标签</h4>
    <ul class="widget-tag-list">
      <li><a href="/tags/devops">Devops</a></li>
      <li><a href="/tags/interview">Interview</a></li>
      <li><a href="/tags/leetcode">Leetcode</a></li>
      <li><a href="/tags/linux">Linux</a></li>
      <li><a href="/tags/list">List</a></li>
      <li><a href="/tags/vmware">Vmware</a></li>
    </ul>
  </div></aside>

      </div>
		</div>
	</div>
</section>

<footer class="footer">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="footer-manu">
					<ul>
            
					</ul>
				</div>
				<p class="copyright">Copyright © 2021 XIAK 保留所有权利</p>
			</div>
		</div>
	</div>
</footer>






<script src="https://xiak.com/plugins/jQuery/jquery.min.js" ></script>

<script src="https://xiak.com/plugins/bootstrap/bootstrap.min.js" ></script>

<script src="https://xiak.com/plugins/slick/slick.min.js" ></script>

<script src="https://xiak.com/plugins/magnific-popup/magnific-popup.min.js" ></script>

<script src="https://xiak.com/plugins/shuffle/shuffle.min.js" ></script>

<script src="https://xiak.com/plugins/google-map/gmap.js" defer></script>




<script src="https://xiak.com/js/script.min.js"></script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"></script>
<div id="js-cookie-box" class="cookie-box cookie-box-hide">
	使用 cookies 可以提高本站的性能, 本站不会通过 cookies 获取用户任何信息, 是否同意使用 cookies <span id="js-cookie-button" class="btn btn-small btn-solid-border" style="margin: 10px">同意</span>
</div>
<script>
	(function ($) {
		const cookieBox = document.getElementById('js-cookie-box');
		const cookieButton = document.getElementById('js-cookie-button');
		if (!Cookies.get('cookie-box')) {
			cookieBox.classList.remove('cookie-box-hide');
			cookieButton.onclick = function () {
				Cookies.set('cookie-box', true, {
					expires:  2 
				});
				cookieBox.classList.add('cookie-box-hide');
			};
		}
	})(jQuery);
</script>


<style>
.cookie-box {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  text-align: center;
  z-index: 9999;
  padding: 1rem 2rem;
  background: rgb(71, 71, 71);
  transition: all .75s cubic-bezier(.19, 1, .22, 1);
  color: #fdfdfd;
}

.cookie-box-hide {
  display: none;
}
</style>
</body>

</html>